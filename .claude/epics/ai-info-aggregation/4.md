---
name: Article Storage Schema
status: open
created: 2025-09-10T03:15:12Z
updated: 2025-09-10T08:42:29Z
github: https://github.com/tsanghans626/claude-life/issues/4
depends_on: [001]
parallel: false
conflicts_with: []
---

# Task: Article Storage Schema

## Description

Design and implement the article storage table with read/unread state tracking, content management, and automated retention/cleanup policies building on the base schema from task 001.

## Acceptance Criteria

- [ ] Article table with full content storage and metadata
- [ ] Read/unread state tracking with timestamps
- [ ] Content deduplication logic to prevent duplicate articles
- [ ] Retention policies for automatic cleanup of old articles
- [ ] Indexes optimized for common query patterns
- [ ] Database constraints for data integrity

## Technical Details

- Extend article model from task 001 with additional fields
- Add fields: content (full text), summary, tags, readAt (nullable), isRead (boolean)
- Implement unique constraint on (sourceId, link) to prevent duplicates
- Add database indexes for: readAt, isRead, publishedAt, sourceId combinations
- Create database functions/triggers for automatic cleanup (articles older than X days)
- Consider content compression for large articles
- Add soft delete capability with deletedAt field

## Dependencies

- [ ] Task 001 (Database Schema Design) must be completed first
- [ ] Database migration capabilities
- [ ] Understanding of content storage requirements

## Effort Estimate

- Size: M
- Hours: 6-8 hours
- Parallel: false

## Definition of Done

- [ ] Article schema extended with all required fields
- [ ] Unique constraints and indexes implemented
- [ ] Retention/cleanup policies configured
- [ ] Database migrations tested
- [ ] Content deduplication verified
- [ ] Performance tested with sample data
